<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"/>
    <title>天下VPN</title>
    <link rel="stylesheet" type="text/css" href="../static/css/normalize.css"/><!--CSS RESET-->
    <!--Material Design Iconic Font-->
    <link rel="stylesheet" href="../static/material-design/css/material-design-iconic-font.css"/>
    <link rel="stylesheet" href="../static/css/htmleaf-demo.css"/>
    <!--jSide Menu CSS-->
    <link rel="stylesheet" href="../static/css/jside-menu.css"/>
    <!--jSide Skins-->
    <link rel="stylesheet" href="../static/css/jside-skins.css"/>
    <link rel="stylesheet" href="../static/css/demo-only.css"/>

</head>
<style>
    .tc {
        text-align: center;
    }

    .tc h3 {
        color: black;
        text-align: center;
        padding-top: 5px;
        line-height: 10px;
    }

    .tc h2 {
        color: orangered;
        text-align: center;
        line-height: 20px;
    }

    .dyBtn {
        outline: none;
        border: 1px solid;
        background: white;
        color: dodgerblue;
        align-content: center;
        border-radius: 20px;
        margin-bottom: 5px;
        padding: 5px 10px 5px 10px;
        border-color: dodgerblue;
    }
    .tz{
        outline: none;
        border: 0;
        background: red;
        color: white;
        align-content: center;
        border-radius: 3px;
        margin-bottom: 5px;
        padding: 0 5px 0 5px;
        line-height: 20px;
    }
</style>
<body>
<menu class="menubar">
    <menuitem>
        <button class="menu-trigger"></button>
    </menuitem>

    <menuitem class="logo" title="Your Logo Goes Here">
            <h6>天下数据</h6>
    </menuitem>

</menu>


<div class="menu-head">
	   <span class="layer">
	<div class="col">
	  <div class="row for-pic">
	   <div class="profile-pic">     
	   <img src="../static/image/asif-mughal.jpg" alt="Asif Mughal"/>
	         </div>
	  </div>
	         <div class="row for-name">
	   <h3 title="User Name"> 售后问题反馈 </h3>
	        <span class="tagline"> kangoShy@gmail.com </span>
	          </div>
	         </div> <!--//col-->
	  </span>
</div> <!--//menu-head-->

<nav class="menu-container">

    <ul class="menu-items">

        <li><span class="item-icon"> <i class="zmdi zmdi-tv"></i> </span> <a href="/toIndex">
            首页 </a></li>

        <li><span class="item-icon"><i class="zmdi zmdi-android"></i></span> <a href="/androidCourse">
            Android 使用教程 </a></li>

        <li><span class="item-icon"> <i class="zmdi zmdi-apple"></i> </span> <a href="/iosCourse">
            IOS 使用教程 </a></li>

        <li class="has-sub"><span class="item-icon"> <i class="zmdi zmdi-windows"></i> </span>
            <a href="/windowsCourse">Windows 使用教程</a></li>

        <li class="has-sub"><span class="item-icon"> <i class="zmdi zmdi-devices"></i> </span>
            <a href="/macCourse">Mac 使用教程</a></li>


        <li><span class="item-icon"> <i class="zmdi zmdi-keyboard"></i> </span> <a href="#1">
            操作指南 </a></li>

        <li><span class="item-icon"> <i class="zmdi zmdi-dock"></i> </span> <a href="/myOrder">
            我的订单 </a></li>


        <li><span class="item-icon"> <i class="zmdi zmdi-mouse"></i> </span> <a href="/customerService">
            联系客服 </a></li>

        <li><span class="item-icon"> <i class="zmdi zmdi-dock"></i> </span> <a href="/logout">
            退出登录 </a></li>

    </ul>


</nav>


<div class="dim-overlay"></div>

<br>
<br>
<div id="xxtz"><br></div>
<header class="intro">
    <div>
        <picture>
            <img style="max-width: 100%;height: auto;opacity: 1" src="../static/image/asif-mughal.jpg">
        </picture>
    </div>

    <span id="combo"></span>
</header>

<main>
    <article>
        <h3>关于境外软件使用指南</h3>
        <ul>1、使用前先购买套餐，并且连上VPN！</ul>
        <ul>2、安卓用户进入 https://play.google.com/store 进行下载软件</ul>
        <ul>3、安卓安装包下载 https://wwe.lanzoui.com/b01innxaj<br>密码:8888</ul>
        <ul>PS: 以上操作都要先连接VPN才能使用</ul>
    </article>
</main>

<main>
    <article>

        <h3> 用户购买须知 </h3>
        <ul>
            <span id="userKnow"></span>
        </ul>
    </article>
</main>

<div class="htmleaf-container">
    <div class="related">
        <h6>
            本站由天下数据提供计算服务
        </h6>
        <!--<div style="font-size: 20%">
            商务合作：KangoShy@gmail.com
        </div>
        <div style="font-size: 1px">
            CopyRight 2021 天下数据（西安）有限公司 陕ICP备27463882号
        </div>-->
    </div>
</div>

<script src="../static/js/jquery-1.11.0.min.js" type="text/javascript"></script>
<script src="../static/js/jquery.jside.menu.js"></script>
<script src="../static/js/demo-only.js"></script>
<script>
    $(document).ready(function () {

        $(".menu-container").jSideMenu({
            jSidePosition: "position-left", //possible options position-left or position-right

            jSideSticky: true, // menubar will be fixed on top, false to set static

            jSideSkin: "default-skin", // to apply custom skin, just put its name in this string
        });
    });

    function getComboData() {
        //加载套餐
        $.ajax({
            url: '/vpn/getComboList',
            type: 'GET',
            async: true,
            dataType: 'json',
            headers:{"Authorization": window.localStorage.getItem("token")},
            success: function (res) {
                console.log(res);
                if (res != null) {
                    let text = '<div class="slide-box">';
                    for (let i = 0; i < res.data.length; i++) {
                        let x = '<div class="slide-item"><main><article class="tc"><h3>' + res.data[i].comboName + '</h3>'
                            + '<h2> ' + res.data[i].comboPrice + ' </h2><button class="dyBtn" onclick="toBuy(\'' + res.data[i].id + '\')">立即订阅</button></article></main></div>';
                        text += x;
                    }
                    text += "</div>"
                    $('#combo').html(text);
                }
            }
        })
    }

    function toBuy(id) {
        window.location.href = "/buy?id=" + id;
    }

    function getUserKnow() {
        //加载须知
        $.ajax({
            url: '/vpn/getUserKnow',
            type: 'GET',
            async: true,
            dataType: 'json',
            //headers:{"Authorization": window.localStorage.getItem("token")},
            success: function (res) {
                console.log(res);
                if (res != null) {
                    let text = '';
                    for (let i = 0; i < res.data.length; i++) {
                        text += ('<span>' + res.data[i] + '</span><br>');
                    }
                    $('#userKnow').html(text);
                }
            }
        })
    }

    window.onload = function () {
        getUserKnow();
        getComboData();
    };

    function getMessage() {
        $.ajax({
            url: '/vpn/getMessage',
            type: 'GET',
            success: function (res) {
                if (res != null) {
                    let data = res.data;
                    if (data == null) {
                        $("#xxtz").empty();
                        $("#xxtz").append("<br>")
                    }else{
                        let text =
                            "<main>\n" +
                            "    <article>\n" +
                            "        <h4>\n" +
                            "            <button class=\"tz\">" + data.messageType + "</button>&nbsp;&nbsp;<a onclick='readMessage(" + data.messageId + ")'>" + data.content + "</a>\n" +
                            "        </h4>\n" +
                            "    </article>\n" +
                            "</main>";
                        $("#xxtz").empty();
                        $("#xxtz").append(text);
                    }
                }
            }
        })
    }

    //setInterval("getMessage()", "1000");

    function readMessage(id) {
        $.ajax({
            url: '/vpn/read',
            data:{"messageId" : id},
            type: 'GET',
            success: function () {
                $("#xxtz").empty();
                $("#xxtz").append("<br>");
            }
        })
    }

</script>
</body>
</html>